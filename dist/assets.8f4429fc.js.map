{"version":3,"sources":["assets/MediaPlayer.js","assets/plugins/AutoPlay.js","assets/plugins/AutoPause.ts","assets/index.js"],"names":["MediaPlayer","config","media","el","plugins","_initPlugins","prototype","player","play","pause","muted","value","forEach","plugin","run","togglePlay","paused","mute","unmute","AutoPlay","video","document","querySelector","AutoPause","button","onclick","playButton","muteButton","navigator","serviceWorker","register","catch","error","console","log","message"],"mappings":";;AGAA;;AACA;;AACA,ADFA,IAAA,SAAA;AFAA,AEAA,ADAA,SAASmB,QAAT,GAAoB,CAAE;ADCtB,AEDA,YAAA;AFEA,ACAAA,ECDE,MDCM,CAACb,ECDP,ODCF,CAAmBQ,CCDjB,EDCF,CCDE,EDCwBP,MAAD,IAAY;ADErC,AGAA,EFDI,ECDA,ECEEa,AFDE,CAACb,ECDA,ECEE,EFDI,CECDc,AFDEX,ICDZ,CDCA,ECDiB,ADCC,CECA,CAACY,EDFnB,WCEU,CAAuB,OAAvB,CAAd;AHCA,AGAA,IDFI,ADCIf,EECFA,GDFG,CDCK,CAACG,CECH,GAAG,CFDP,GECWV,AFDG,IAAd,ICDJ,GAA0B,KAAK,ICEpB,CAAgB,aDFD,CAAwB,IAAxB,CAA6B,IAA7B,CAA1B;AFIJ,EGDEG,AFDG,EECD,ADFA,ECEEiB,GDFG,ECCsB,oBDD3B,GAA8B,KAAK,sBAAL,CAA4B,IAA5B,CAAiC,IAAjC,CAA9B;AFIJ,EGDEhB,ADDC,OCCM,EAAE,CAAC,IAAIe,iBAAJ,EAAD,EAAiB,IAAII,kBAAJ,EAAjB;AHEX,AGJ+B,CAAhB,CAAf,AFCIhB,MAAM,CAACC,IAAP;ADIJ,AGCA,AFJC,CALD,CCME,ICGIgB,KDHJ,CCGU,ADHV,GCGaH,MDHb,CAAA,CCGqB,CAACC,CDHtB,GAAA,SCGa,CAAuB,ADHhC,MAAJ,ECGa,ADHH,CCGZ;AHAA,IEFI,KAAK,MAAL,GAAc,MAAd;AFGJ,AGAAE,IDDI,ECCE,CAACC,CDDG,MCCV,CFHeN,CCEG,CCCD,EDDI,ICCEZ,ADDE,MCCI,CAACQ,UAAP,EAAvB,CDDqB,CAAyB,KAAK,kBAA9B,EAAkD;AFEvE,MEDM,SAAS,EAAE,KAAK;AFEtB,AGAA,IDHuE,CAAlD,CCGfW,ADHF,UCGY,GAAGL,QAAQ,CAACC,aAAT,CAAuB,aAAvB,CAAnB;AHCA,IEAI,QAAQ,CAAC,OAAT,CAAiB,KAAK,MAAL,CAAY,KAA7B;AFCJ,AGDAI,IDEI,MCFM,CAACD,CDEC,CAAC,KCFb,GAAqB,MAAMlB,EDEvB,CAA0B,GCFG,CAACQ,UAAP,EAA3B,EDEI,EAA8C,KAAK,sBAAnD;AFAJ,EECG,CAVD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","file":"assets.8f4429fc.js","sourceRoot":"..","sourcesContent":["//  function MediaPlayer(config) {\n//     this.media = config.el;\n//     this.plugins = config.plugins || [];\n\n//     this._initPlugins();\n//   }\n\n//   MediaPlayer.prototype._initPlugins = () => {\n//     const player = {\n//       play: () =>{ this.play()},\n//       pause: () => {this.pause()},\n//       media: this.media,\n//       get muted() {\n//         return this.media.muted;\n//       },\n//       set muted(value) {\n//         this.media.muted = value;\n//         // if (value === true){\n//         //   this.media.muted = true\n//         // }else{\n//         //   this.media.muted = false\n//         // }\n//       }\n//     };\n//     this.plugins.forEach(plugin => {\n//       plugin.run(this);\n//     });\n//   }\n//   MediaPlayer.prototype.play = function() {\n//     this.media.play();\n//   };\n\n//   MediaPlayer.prototype.pause = function() {\n//     this.media.pause();\n//   };\n\n//   MediaPlayer.prototype.togglePlay = function() {\n//     if (this.media.paused) {\n//       this.play();\n//     } else {\n//       this.pause();\n//     }\n//   };\n\n//   MediaPlayer.prototype.mute = () => {\n//     this.media.muted = true;\n//   }\n//   MediaPlayer.prototype.unmute = () => {\n//     this.media.muted = false;\n//   }\n\n \n//   export default MediaPlayer;\n\nfunction MediaPlayer(config) {\n  this.media = config.el;\n  this.plugins = config.plugins || [];\n\n  this._initPlugins();\n}\n\nMediaPlayer.prototype._initPlugins = function() {\n  const player = {\n    play: () => this.play(),\n    pause: () => this.pause(),\n    media: this.media,\n    get muted() {\n      return this.media.muted;\n    },\n    set muted(value) {\n      this.media.muted = value\n    },\n  };\n\n  this.plugins.forEach(plugin => {\n    plugin.run(player);\n  });\n};\n\nMediaPlayer.prototype.play = function() {\n  this.media.play();\n};\n\nMediaPlayer.prototype.pause = function() {\n  this.media.pause();\n};\n\nMediaPlayer.prototype.togglePlay = function() {\n  if (this.media.paused) {\n    this.play();\n  } else {\n    this.pause();\n  }\n};\n\nMediaPlayer.prototype.mute = function() {\n  this.media.muted = true;\n};\n\nMediaPlayer.prototype.unmute = function() {\n  this.media.muted = false;\n};\n\nexport default MediaPlayer;\n","function AutoPlay() {}\n\nAutoPlay.prototype.run = (player) => {\n    if (!player.muted){\n        player.muted =true;\n    }\n    player.play();\n};\n\nexport default AutoPlay;","class AutoPause {\n  constructor() {\n    this.threshold = 0.25;\n    this.handleIntersection = this.handleIntersection.bind(this);\n    this.handleVisibilityChange = this.handleVisibilityChange.bind(this);\n\n  }\n\n  run(player) {\n    this.player = player;\n\n    const observer = new IntersectionObserver(this.handleIntersection, {\n      threshold: this.threshold,\n    });\n\n    observer.observe(this.player.media);\n\n    document.addEventListener(\"visibilitychange\", this.handleVisibilityChange)\n  }\n\n  handleIntersection(entries) {\n    const entry = entries[0];\n\n    const isVisible = entry.intersectionRatio >= this.threshold;\n\n    if (isVisible) {\n      this.player.play();\n    } else {\n      this.player.pause();\n    }\n  }\n  handleVisibilityChange() {\n      const isVisible = document.visibilityState === \"visible\";\n      if (isVisible) {\n          this.player.play();\n      }else {\n          this.player.pause();\n      }\n  }\n}\n\n\n\nexport default AutoPause;","import MediaPlayer from './MediaPlayer.js';\nimport AutoPlay from './plugins/AutoPlay.js';\nimport AutoPause from './plugins/AutoPause.ts';\n\nconst video = document.querySelector('video');\nconst player = new MediaPlayer({\n  el: video,\n  plugins: [new AutoPlay(), new AutoPause()],\n});\n\n\nconst button = document.querySelector('button');\nbutton.onclick = () => player.togglePlay();\n\nconst playButton = document.querySelector('#playButton');\nplayButton.onclick = () => player.togglePlay();\n\nconst muteButton = document.querySelector('#muteButton');\nmuteButton.onclick = () => {\n      if (player.media.muted) {\n            player.unmute();\n      } else {\n            player.mute();\n      }\n};\n\nif('serviceWorker' in navigator){\n      navigator.serviceWorker.register('/sw.js').catch(error => {\n            console.log(error.message);\n      })\n}\n"]}